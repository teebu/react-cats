import{j as e,I as v}from"./index-CSATnxuA.js";import{b as a,L as N}from"./vendor-MPaorx5Y.js";import{S}from"./Skeleton-DJRvpShr.js";import{F as b}from"./FavoriteButton-C-0VBf70.js";import"./lodash-dJZdcLou.js";const w=({count:r=15})=>e.jsx("div",{className:"brutalist-grid",style:{padding:"2rem"},children:Array.from({length:r}).map((s,c)=>e.jsxs("div",{className:"grid-item",children:[e.jsx("div",{className:"item-number",children:String(c+1).padStart(3,"0")}),e.jsx("div",{className:"image-wrapper",children:e.jsx(S,{height:"300px",width:"100%",borderRadius:"0px"})})]},c))});function y({loading:r,hasMore:s,onLoadMore:c,rootMargin:i="100px",threshold:h=.1}){const d=a.useRef(null),m=a.useRef(null),u=a.useCallback(n=>{const[l]=n;l.isIntersecting&&s&&!r&&c()},[s,r,c]);return a.useEffect(()=>{const n=m.current;if(!n)return;const l={root:null,rootMargin:i,threshold:h};return d.current=new IntersectionObserver(u,l),d.current.observe(n),()=>{d.current&&n&&d.current.unobserve(n)}},[u,i,h]),m}function I({size:r=15}){const[s,c]=a.useState([]),[i,h]=a.useState(!1),[d,m]=a.useState(!1),[u,n]=a.useState(0),[l,j]=a.useState(!0),x=a.useCallback(async()=>{if(i||!l)return;h(!0);const t=setTimeout(()=>{s.length===0&&m(!0)},300);try{const f=await(await fetch(`https://api.thecatapi.com/v1/images/search?limit=${r}&order=random&size=small`)).json();f.length===0?j(!1):(c(g=>[...g,...f]),n(g=>g+1))}catch(o){console.error("Failed to fetch cats:",o)}finally{clearTimeout(t),h(!1),m(!1)}},[r,i,l,s.length]);a.useEffect(()=>{x()},[]);const p=y({loading:i,hasMore:l,onLoadMore:x});return e.jsxs("div",{className:"cats-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("div",{className:"header-decoration"}),e.jsxs("h1",{className:"page-title",children:[e.jsx("span",{className:"title-index",children:"CATALOG"}),"EXPLORE CATS"]}),e.jsxs("div",{className:"header-count",children:[s.length," ",e.jsx("span",{className:"count-label",children:"LOADED"})]})]}),s.length===0&&d?e.jsx(w,{count:r}):s.length===0&&i?e.jsx("div",{style:{minHeight:"60vh"}}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"brutalist-grid",children:s.map((t,o)=>e.jsxs("div",{className:"grid-item",children:[e.jsx("div",{className:"item-number",children:String(o+1).padStart(3,"0")}),e.jsxs(N,{to:`/cat/${t.id}`,className:"image-wrapper",children:[e.jsx(v,{width:t.width,height:t.height,maxWidth:400,maxHeight:400,style:{borderRadius:"0"},delay:100,src:t.url,alt:`Cat ${o+1}`}),e.jsx("div",{className:"image-overlay",children:"VIEW"})]}),e.jsx(b,{catId:t.id,catUrl:t.url,width:t.width,height:t.height})]},`${t.id}-${o}`))}),e.jsx("div",{ref:p,style:{height:"20px",margin:"2rem 0"}}),i&&e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-bar"}),e.jsx("p",{className:"loading-text",children:"LOADING MORE CATS..."})]}),!l&&s.length>0&&e.jsxs("div",{className:"end-state",children:[e.jsx("div",{className:"end-marker",children:"///"}),e.jsx("p",{children:"END OF CATALOG"})]})]})]})}export{I as default};
//# sourceMappingURL=Cats-Br5bekC1.js.map
