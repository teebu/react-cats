{"version":3,"file":"Cats-Brd7zeQz.js","sources":["../../src/components/ImageGridSkeleton.tsx","../../src/hooks/useInfiniteScroll.ts","../../src/pages/Cats.tsx"],"sourcesContent":["import Skeleton from './Skeleton';\n\nconst ImageGridSkeleton = ({ count = 15 }) => {\n  return (\n    <div className=\"brutalist-grid\" style={{ padding: '2rem' }}>\n      {Array.from({ length: count }).map((_, i) => (\n        <div key={i} className=\"grid-item\">\n          <div className=\"item-number\">{String(i + 1).padStart(3, '0')}</div>\n          <div className=\"image-wrapper\">\n            <Skeleton height=\"300px\" width=\"100%\" borderRadius=\"0px\" />\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default ImageGridSkeleton;\n","import { useEffect, useRef, useCallback } from 'react';\n\ninterface UseInfiniteScrollProps {\n  loading: boolean;\n  hasMore: boolean;\n  onLoadMore: () => void;\n  rootMargin?: string;\n  threshold?: number;\n}\n\nexport function useInfiniteScroll({\n  loading,\n  hasMore,\n  onLoadMore,\n  rootMargin = '100px',\n  threshold = 0.1,\n}: UseInfiniteScrollProps) {\n  const observerRef = useRef<IntersectionObserver | null>(null);\n  const loadMoreRef = useRef<HTMLDivElement | null>(null);\n\n  const handleObserver = useCallback(\n    (entries: IntersectionObserverEntry[]) => {\n      const [target] = entries;\n      if (target.isIntersecting && hasMore && !loading) {\n        onLoadMore();\n      }\n    },\n    [hasMore, loading, onLoadMore]\n  );\n\n  useEffect(() => {\n    const element = loadMoreRef.current;\n    if (!element) return;\n\n    const option = {\n      root: null,\n      rootMargin,\n      threshold,\n    };\n\n    observerRef.current = new IntersectionObserver(handleObserver, option);\n    observerRef.current.observe(element);\n\n    return () => {\n      if (observerRef.current && element) {\n        observerRef.current.unobserve(element);\n      }\n    };\n  }, [handleObserver, rootMargin, threshold]);\n\n  return loadMoreRef;\n}\n","import React, { useEffect, useState, useCallback } from 'react';\nimport '../App.css';\nimport '../styles/Cats.css';\nimport ImageHolder from '../helpers/ImageHolder';\nimport { Link } from 'react-router-dom';\nimport ImageGridSkeleton from '../components/ImageGridSkeleton';\nimport { useInfiniteScroll } from '../hooks/useInfiniteScroll';\nimport FavoriteButton from '../components/FavoriteButton';\n\ninterface CatData {\n  id: string;\n  url: string;\n  width?: number;\n  height?: number;\n}\n\ninterface CatsProps {\n  size?: number;\n}\n\nfunction Cats({ size = 15 }: CatsProps) {\n  const [catsData, setCatsData] = useState<CatData[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [showSkeleton, setShowSkeleton] = useState(false);\n  const [page, setPage] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n\n  const fetchCatData = useCallback(async () => {\n    if (loading || !hasMore) return;\n\n    setLoading(true);\n\n    // Only show skeleton if loading takes longer than 300ms\n    const skeletonTimer = setTimeout(() => {\n      if (catsData.length === 0) {\n        setShowSkeleton(true);\n      }\n    }, 300);\n\n    try {\n      const res = await fetch(\n        `https://api.thecatapi.com/v1/images/search?limit=${size}&order=random&size=small`\n      );\n      const res_json = await res.json();\n\n      if (res_json.length === 0) {\n        setHasMore(false);\n      } else {\n        setCatsData(prev => [...prev, ...res_json]);\n        setPage(prev => prev + 1);\n      }\n    } catch (error) {\n      console.error('Failed to fetch cats:', error);\n    } finally {\n      clearTimeout(skeletonTimer);\n      setLoading(false);\n      setShowSkeleton(false);\n    }\n  }, [size, loading, hasMore, catsData.length]);\n\n  useEffect(() => {\n    fetchCatData();\n  }, []);\n\n  const loadMoreRef = useInfiniteScroll({\n    loading,\n    hasMore,\n    onLoadMore: fetchCatData,\n  });\n\n  return (\n    <div className=\"cats-page\">\n      <div className=\"page-header\">\n        <div className=\"header-decoration\"></div>\n        <h1 className=\"page-title\">\n          <span className=\"title-index\">CATALOG</span>\n          EXPLORE CATS\n        </h1>\n        <div className=\"header-count\">\n          {catsData.length} <span className=\"count-label\">LOADED</span>\n        </div>\n      </div>\n\n      {catsData.length === 0 && showSkeleton ? (\n        <ImageGridSkeleton count={size} />\n      ) : catsData.length === 0 && loading ? (\n        <div style={{ minHeight: '60vh' }} />\n      ) : (\n        <>\n          <div className=\"brutalist-grid\">\n            {catsData.map((cat, index) => (\n              <div key={`${cat.id}-${index}`} className=\"grid-item\">\n                <div className=\"item-number\">{String(index + 1).padStart(3, '0')}</div>\n                <Link to={`/cat/${cat.id}`} className=\"image-wrapper\">\n                  <ImageHolder\n                    width={cat.width}\n                    height={cat.height}\n                    maxWidth={400}\n                    maxHeight={400}\n                    style={{ borderRadius: '0' }}\n                    delay={100}\n                    src={cat.url}\n                    alt={`Cat ${index + 1}`}\n                  />\n                  <div className=\"image-overlay\">VIEW</div>\n                </Link>\n                <FavoriteButton\n                  catId={cat.id}\n                  catUrl={cat.url}\n                  width={cat.width}\n                  height={cat.height}\n                />\n              </div>\n            ))}\n          </div>\n\n          <div ref={loadMoreRef} style={{ height: '20px', margin: '2rem 0' }} />\n\n          {loading && (\n            <div className=\"loading-state\">\n              <div className=\"loading-bar\"></div>\n              <p className=\"loading-text\">LOADING MORE CATS...</p>\n            </div>\n          )}\n\n          {!hasMore && catsData.length > 0 && (\n            <div className=\"end-state\">\n              <div className=\"end-marker\">///</div>\n              <p>END OF CATALOG</p>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default Cats;\n"],"names":["ImageGridSkeleton","count","jsx","_","i","jsxs","Skeleton","useInfiniteScroll","loading","hasMore","onLoadMore","rootMargin","threshold","observerRef","useRef","loadMoreRef","handleObserver","useCallback","entries","target","useEffect","element","option","Cats","size","catsData","setCatsData","useState","setLoading","showSkeleton","setShowSkeleton","page","setPage","setHasMore","fetchCatData","skeletonTimer","res_json","prev","error","Fragment","cat","index","Link","ImageHolder","FavoriteButton"],"mappings":"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"}