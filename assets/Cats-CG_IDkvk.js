import{j as e,I as p}from"./index-9T2554kS.js";import{b as s,L as g}from"./vendor-MPaorx5Y.js";import{S as j}from"./Skeleton-BqskcAmg.js";import{F as y}from"./FavoriteButton-BMOYgtkR.js";import"./lodash-dJZdcLou.js";const v=({count:r=15})=>e.jsx("ul",{className:"fancy-img-list shadowlink",children:Array.from({length:r}).map((a,l)=>e.jsx("li",{style:{borderRadius:"120px"},children:e.jsx(j,{height:"300px",borderRadius:"120px"})},l))});function b({loading:r,hasMore:a,onLoadMore:l,rootMargin:n="100px",threshold:d=.1}){const h=s.useRef(null),u=s.useRef(null),o=s.useCallback(i=>{const[c]=i;c.isIntersecting&&a&&!r&&l()},[a,r,l]);return s.useEffect(()=>{const i=u.current;if(!i)return;const c={root:null,rootMargin:n,threshold:d};return h.current=new IntersectionObserver(o,c),h.current.observe(i),()=>{h.current&&i&&h.current.unobserve(i)}},[o,n,d]),u}function C({size:r=15}){const[a,l]=s.useState([]),[n,d]=s.useState(!1),[h,u]=s.useState(0),[o,i]=s.useState(!0),c=s.useCallback(async()=>{if(!(n||!o)){d(!0);try{const m=await(await fetch(`https://api.thecatapi.com/v1/images/search?limit=${r}&order=random&size=small`)).json();m.length===0?i(!1):(l(f=>[...f,...m]),u(f=>f+1))}catch(t){console.error("Failed to fetch cats:",t)}finally{d(!1)}}},[r,n,o]);s.useEffect(()=>{c()},[]);const x=b({loading:n,hasMore:o,onLoadMore:c});return e.jsxs("div",{children:[e.jsx("h1",{children:"Explore Cats"}),a.length===0&&n?e.jsx(v,{count:r}):e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"fancy-img-list shadowlink",children:a.map((t,m)=>e.jsxs("li",{style:{borderRadius:"120px",position:"relative"},children:[e.jsx(g,{to:`/cat/${t.id}`,children:e.jsx(p,{width:t.width,height:t.height,maxWidth:200,maxHeight:200,style:{borderRadius:"90px"},delay:100,src:t.url,alt:"cat"})}),e.jsx(y,{catId:t.id,catUrl:t.url,width:t.width,height:t.height})]},`${t.id}-${m}`))}),e.jsx("div",{ref:x,style:{height:"20px",margin:"2rem 0"}}),n&&e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx("div",{style:{fontSize:"3rem",animation:"spin 1s linear infinite"},children:"ðŸ±"}),e.jsx("p",{style:{marginTop:"1rem",color:"var(--text-secondary)"},children:"Loading more cats..."})]}),!o&&a.length>0&&e.jsx("p",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"You've seen all the cats! ðŸ˜º"})]})]})}export{C as default};
//# sourceMappingURL=Cats-CG_IDkvk.js.map
