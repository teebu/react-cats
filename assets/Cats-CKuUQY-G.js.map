{"version":3,"file":"Cats-CKuUQY-G.js","sources":["../../src/components/ImageGridSkeleton.tsx","../../src/hooks/useInfiniteScroll.ts","../../src/pages/Cats.tsx"],"sourcesContent":["import Skeleton from './Skeleton';\n\nconst ImageGridSkeleton = ({ count = 15 }) => {\n  return (\n    <ul className=\"fancy-img-list shadowlink\">\n      {Array.from({ length: count }).map((_, i) => (\n        <li key={i} style={{ borderRadius: '120px' }}>\n          <Skeleton height=\"300px\" borderRadius=\"120px\" />\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default ImageGridSkeleton;\n","import { useEffect, useRef, useCallback } from 'react';\n\ninterface UseInfiniteScrollProps {\n  loading: boolean;\n  hasMore: boolean;\n  onLoadMore: () => void;\n  rootMargin?: string;\n  threshold?: number;\n}\n\nexport function useInfiniteScroll({\n  loading,\n  hasMore,\n  onLoadMore,\n  rootMargin = '100px',\n  threshold = 0.1,\n}: UseInfiniteScrollProps) {\n  const observerRef = useRef<IntersectionObserver | null>(null);\n  const loadMoreRef = useRef<HTMLDivElement | null>(null);\n\n  const handleObserver = useCallback(\n    (entries: IntersectionObserverEntry[]) => {\n      const [target] = entries;\n      if (target.isIntersecting && hasMore && !loading) {\n        onLoadMore();\n      }\n    },\n    [hasMore, loading, onLoadMore]\n  );\n\n  useEffect(() => {\n    const element = loadMoreRef.current;\n    if (!element) return;\n\n    const option = {\n      root: null,\n      rootMargin,\n      threshold,\n    };\n\n    observerRef.current = new IntersectionObserver(handleObserver, option);\n    observerRef.current.observe(element);\n\n    return () => {\n      if (observerRef.current && element) {\n        observerRef.current.unobserve(element);\n      }\n    };\n  }, [handleObserver, rootMargin, threshold]);\n\n  return loadMoreRef;\n}\n","import React, { useEffect, useState, useCallback } from 'react';\nimport '../App.css';\nimport ProgressiveImage from 'react-progressive-graceful-image';\nimport ImageHolder from '../helpers/ImageHolder';\nimport { Link } from 'react-router-dom';\nimport FancyList from '../helpers/FancyList';\nimport ImageGridSkeleton from '../components/ImageGridSkeleton';\nimport { useInfiniteScroll } from '../hooks/useInfiniteScroll';\nimport FavoriteButton from '../components/FavoriteButton';\n\ninterface CatData {\n  id: string;\n  url: string;\n  width?: number;\n  height?: number;\n}\n\ninterface CatsProps {\n  size?: number;\n}\n\nfunction Cats({ size = 15 }: CatsProps) {\n  const [catsData, setCatsData] = useState<CatData[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n\n  const fetchCatData = useCallback(async () => {\n    if (loading || !hasMore) return;\n\n    setLoading(true);\n    try {\n      const res = await fetch(\n        `https://api.thecatapi.com/v1/images/search?limit=${size}&order=random&size=small`\n      );\n      const res_json = await res.json();\n\n      if (res_json.length === 0) {\n        setHasMore(false);\n      } else {\n        setCatsData(prev => [...prev, ...res_json]);\n        setPage(prev => prev + 1);\n      }\n    } catch (error) {\n      console.error('Failed to fetch cats:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [size, loading, hasMore]);\n\n  useEffect(() => {\n    fetchCatData();\n  }, []);\n\n  const loadMoreRef = useInfiniteScroll({\n    loading,\n    hasMore,\n    onLoadMore: fetchCatData,\n  });\n\n  return (\n    <div>\n      <h1>Explore Cats</h1>\n      {catsData.length === 0 && loading ? (\n        <ImageGridSkeleton count={size} />\n      ) : (\n        <>\n          <ul className=\"fancy-img-list shadowlink\">\n            {catsData.map((cat, index) => (\n              <li key={`${cat.id}-${index}`} style={{ borderRadius: '120px', position: 'relative' }}>\n                <Link to={`/cat/${cat.id}`}>\n                  <ImageHolder\n                    width={cat.width}\n                    height={cat.height}\n                    maxWidth={200}\n                    maxHeight={200}\n                    style={{ borderRadius: '90px' }}\n                    delay={100}\n                    src={cat.url}\n                    alt=\"cat\"\n                  />\n                </Link>\n                <FavoriteButton\n                  catId={cat.id}\n                  catUrl={cat.url}\n                  width={cat.width}\n                  height={cat.height}\n                />\n              </li>\n            ))}\n          </ul>\n\n          {/* Infinite scroll trigger */}\n          <div ref={loadMoreRef} style={{ height: '20px', margin: '2rem 0' }} />\n\n          {/* Loading indicator */}\n          {loading && (\n            <div style={{ textAlign: 'center', padding: '2rem' }}>\n              <div\n                style={{\n                  fontSize: '3rem',\n                  animation: 'spin 1s linear infinite',\n                }}\n              >\n                üê±\n              </div>\n              <p style={{ marginTop: '1rem', color: 'var(--text-secondary)' }}>\n                Loading more cats...\n              </p>\n            </div>\n          )}\n\n          {/* End of results */}\n          {!hasMore && catsData.length > 0 && (\n            <p style={{ textAlign: 'center', padding: '2rem', color: 'var(--text-secondary)' }}>\n              You've seen all the cats! üò∫\n            </p>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default Cats;\n"],"names":["ImageGridSkeleton","count","jsx","_","i","Skeleton","useInfiniteScroll","loading","hasMore","onLoadMore","rootMargin","threshold","observerRef","useRef","loadMoreRef","handleObserver","useCallback","entries","target","useEffect","element","option","Cats","size","catsData","setCatsData","useState","setLoading","page","setPage","setHasMore","fetchCatData","res_json","prev","error","jsxs","Fragment","cat","index","Link","ImageHolder","FavoriteButton"],"mappings":"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"}