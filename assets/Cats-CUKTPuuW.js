import{j as e,I as p}from"./index-X2aaMjWg.js";import{b as r,L as g}from"./vendor-fvY37QqL.js";import{S as j}from"./Skeleton-mn1qo1d3.js";import{F as y}from"./FavoriteButton-Sx5ykZJ7.js";import"./lodash-BQhbuEWg.js";const v=({count:s=15})=>e.jsx("ul",{className:"fancy-img-list shadowlink",children:Array.from({length:s}).map((a,l)=>e.jsx("li",{style:{borderRadius:"120px"},children:e.jsx(j,{height:"300px",borderRadius:"120px"})},l))});function b({loading:s,hasMore:a,onLoadMore:l,rootMargin:n="100px",threshold:d=.1}){const h=r.useRef(null),u=r.useRef(null),o=r.useCallback(i=>{const[c]=i;c.isIntersecting&&a&&!s&&l()},[a,s,l]);return r.useEffect(()=>{const i=u.current;if(!i)return;const c={root:null,rootMargin:n,threshold:d};return h.current=new IntersectionObserver(o,c),h.current.observe(i),()=>{h.current&&i&&h.current.unobserve(i)}},[o,n,d]),u}function C({size:s=15}){const[a,l]=r.useState([]),[n,d]=r.useState(!0),[h,u]=r.useState(0),[o,i]=r.useState(!0),c=r.useCallback(async()=>{if(!(n||!o)){d(!0);try{const m=await(await fetch(`https://api.thecatapi.com/v1/images/search?limit=${s}&order=random&size=small`)).json();m.length===0?i(!1):(l(x=>[...x,...m]),u(x=>x+1))}catch(t){console.error("Failed to fetch cats:",t)}finally{d(!1)}}},[s,n,o]);r.useEffect(()=>{c()},[]);const f=b({loading:n,hasMore:o,onLoadMore:c});return e.jsxs("div",{children:[e.jsx("h1",{children:"Explore Cats"}),a.length===0&&n?e.jsx(v,{count:s}):e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"fancy-img-list shadowlink",children:a.map((t,m)=>e.jsxs("li",{style:{borderRadius:"120px",position:"relative"},children:[e.jsx(g,{to:`/cat/${t.id}`,children:e.jsx(p,{width:t.width,height:t.height,maxWidth:200,maxHeight:200,style:{borderRadius:"90px"},delay:100,src:t.url,alt:"cat"})}),e.jsx(y,{catId:t.id,catUrl:t.url,width:t.width,height:t.height})]},`${t.id}-${m}`))}),e.jsx("div",{ref:f,style:{height:"20px",margin:"2rem 0"}}),n&&e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx("div",{style:{fontSize:"3rem",animation:"spin 1s linear infinite"},children:"ðŸ±"}),e.jsx("p",{style:{marginTop:"1rem",color:"var(--text-secondary)"},children:"Loading more cats..."})]}),!o&&a.length>0&&e.jsx("p",{style:{textAlign:"center",padding:"2rem",color:"var(--text-secondary)"},children:"You've seen all the cats! ðŸ˜º"})]})]})}export{C as default};
//# sourceMappingURL=Cats-CUKTPuuW.js.map
