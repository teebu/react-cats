import{j as e,I as p}from"./index-CpJDxdoU.js";import{b as t,L as j}from"./vendor-MPaorx5Y.js";import{S as f}from"./Skeleton-Bug3d_u6.js";import{F as v}from"./FavoriteButton-O6goTp_W.js";import"./lodash-dJZdcLou.js";const N=({count:a=15})=>e.jsx("div",{className:"brutalist-grid",style:{padding:"2rem"},children:Array.from({length:a}).map((r,l)=>e.jsxs("div",{className:"grid-item",children:[e.jsx("div",{className:"item-number",children:String(l+1).padStart(3,"0")}),e.jsx("div",{className:"image-wrapper",children:e.jsx(f,{height:"300px",width:"100%",borderRadius:"0px"})})]},l))});function b({loading:a,hasMore:r,onLoadMore:l,rootMargin:i="100px",threshold:m=.1}){const h=t.useRef(null),u=t.useRef(null),c=t.useCallback(n=>{const[d]=n;d.isIntersecting&&r&&!a&&l()},[r,a,l]);return t.useEffect(()=>{const n=u.current;if(!n)return;const d={root:null,rootMargin:i,threshold:m};return h.current=new IntersectionObserver(c,d),h.current.observe(n),()=>{h.current&&n&&h.current.unobserve(n)}},[c,i,m]),u}function y({size:a=15}){const[r,l]=t.useState([]),[i,m]=t.useState(!1),[h,u]=t.useState(0),[c,n]=t.useState(!0),d=t.useCallback(async()=>{if(!(i||!c)){m(!0);try{const o=await(await fetch(`https://api.thecatapi.com/v1/images/search?limit=${a}&order=random&size=small`)).json();o.length===0?n(!1):(l(x=>[...x,...o]),u(x=>x+1))}catch(s){console.error("Failed to fetch cats:",s)}finally{m(!1)}}},[a,i,c]);t.useEffect(()=>{d()},[]);const g=b({loading:i,hasMore:c,onLoadMore:d});return e.jsxs("div",{className:"cats-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("div",{className:"header-decoration"}),e.jsxs("h1",{className:"page-title",children:[e.jsx("span",{className:"title-index",children:"CATALOG"}),"EXPLORE CATS"]}),e.jsxs("div",{className:"header-count",children:[r.length," ",e.jsx("span",{className:"count-label",children:"LOADED"})]})]}),r.length===0&&i?e.jsx(N,{count:a}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"brutalist-grid",children:r.map((s,o)=>e.jsxs("div",{className:"grid-item",children:[e.jsx("div",{className:"item-number",children:String(o+1).padStart(3,"0")}),e.jsxs(j,{to:`/cat/${s.id}`,className:"image-wrapper",children:[e.jsx(p,{width:s.width,height:s.height,maxWidth:400,maxHeight:400,style:{borderRadius:"0"},delay:100,src:s.url,alt:`Cat ${o+1}`}),e.jsx("div",{className:"image-overlay",children:"VIEW"})]}),e.jsx(v,{catId:s.id,catUrl:s.url,width:s.width,height:s.height})]},`${s.id}-${o}`))}),e.jsx("div",{ref:g,style:{height:"20px",margin:"2rem 0"}}),i&&e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-bar"}),e.jsx("p",{className:"loading-text",children:"LOADING MORE CATS..."})]}),!c&&r.length>0&&e.jsxs("div",{className:"end-state",children:[e.jsx("div",{className:"end-marker",children:"///"}),e.jsx("p",{children:"END OF CATALOG"})]})]})]})}export{y as default};
//# sourceMappingURL=Cats-GvEpktlI.js.map
